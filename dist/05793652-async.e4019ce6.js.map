{"version":3,"sources":["node_modules/@ant-design/pro-form/es/components/Checkbox/index.js","src/pages/user/login/index.tsx"],"sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport _objectWithoutProperties from \"@babel/runtime/helpers/esm/objectWithoutProperties\";\nvar _excluded = [\"options\", \"fieldProps\", \"proFieldProps\", \"valueEnum\"];\nimport { runFunction } from '@ant-design/pro-utils';\nimport { Checkbox } from 'antd';\nimport React from 'react';\nimport { createField } from \"../../BaseForm/createField\";\nimport ProFormField from \"../Field\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nvar CheckboxGroup = /*#__PURE__*/React.forwardRef(function (_ref, ref) {\n  var options = _ref.options,\n    fieldProps = _ref.fieldProps,\n    proFieldProps = _ref.proFieldProps,\n    valueEnum = _ref.valueEnum,\n    rest = _objectWithoutProperties(_ref, _excluded);\n  return /*#__PURE__*/_jsx(ProFormField, _objectSpread({\n    ref: ref,\n    valueType: \"checkbox\",\n    valueEnum: runFunction(valueEnum, undefined),\n    fieldProps: _objectSpread({\n      options: options\n    }, fieldProps),\n    lightProps: _objectSpread({\n      labelFormatter: function labelFormatter() {\n        return /*#__PURE__*/_jsx(ProFormField, _objectSpread({\n          ref: ref,\n          valueType: \"checkbox\",\n          mode: \"read\",\n          valueEnum: runFunction(valueEnum, undefined),\n          filedConfig: {\n            customLightMode: true\n          },\n          fieldProps: _objectSpread({\n            options: options\n          }, fieldProps),\n          proFieldProps: proFieldProps\n        }, rest));\n      }\n    }, rest.lightProps),\n    proFieldProps: proFieldProps\n  }, rest));\n});\n/**\n * 多选框的\n *\n * @param\n */\nvar ProFormCheckboxComponents = /*#__PURE__*/React.forwardRef(function (_ref2, ref) {\n  var fieldProps = _ref2.fieldProps,\n    children = _ref2.children;\n  return /*#__PURE__*/_jsx(Checkbox, _objectSpread(_objectSpread({\n    ref: ref\n  }, fieldProps), {}, {\n    children: children\n  }));\n});\nvar ProFormCheckbox = createField(ProFormCheckboxComponents, {\n  valuePropName: 'checked'\n});\nvar WrappedProFormCheckbox = ProFormCheckbox;\nWrappedProFormCheckbox.Group = CheckboxGroup;\nexport default WrappedProFormCheckbox;","import { LockOutlined, UserOutlined } from '@ant-design/icons';\nimport {\n  LoginForm,\n  ProFormCheckbox,\n  ProFormText,\n} from '@ant-design/pro-components';\nimport {\n  FormattedMessage,\n  Helmet,\n  SelectLang,\n  useIntl,\n  useModel,\n} from '@umijs/max';\nimport { Alert, App, Tabs } from 'antd';\nimport { createStyles } from 'antd-style';\nimport React, { useEffect, useState } from 'react';\nimport { flushSync } from 'react-dom';\nimport { Footer } from '@/components';\nimport { getAdminSettings, getOAuthRedirectUrl, login } from '@/services/api';\nimport { getRouteAndMenuData } from '@/utils/routeManager';\n\nimport Settings from '../../../../config/defaultSettings';\n\nconst useStyles = createStyles(({ token }) => {\n  return {\n    action: {\n      marginLeft: '8px',\n      color: 'rgba(0, 0, 0, 0.2)',\n      fontSize: '24px',\n      verticalAlign: 'middle',\n      cursor: 'pointer',\n      transition: 'color 0.3s',\n      '&:hover': {\n        color: token.colorPrimaryActive,\n      },\n    },\n    lang: {\n      width: 42,\n      height: 42,\n      lineHeight: '42px',\n      position: 'fixed',\n      right: 16,\n      borderRadius: token.borderRadius,\n      ':hover': {\n        backgroundColor: token.colorBgTextHover,\n      },\n    },\n    container: {\n      display: 'flex',\n      flexDirection: 'column',\n      height: '100vh',\n      overflow: 'auto',\n      backgroundImage:\n        \"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')\",\n      backgroundSize: '100% 100%',\n    },\n  };\n});\n\nconst ActionIcons: React.FC<{\n  authPlugins: API.AdminSettings['authPlugins'];\n}> = ({ authPlugins }) => {\n  const { styles: _styles } = useStyles();\n\n  const handleOAuthLogin = async (platform: string) => {\n    try {\n      // 在跳转前，先将platform存储到localStorage\n      localStorage.setItem('oauth_platform', platform);\n\n      // 先请求API获取OAuth跳转链接\n      const response = await getOAuthRedirectUrl(platform);\n      if (response.code === 0 && response.data?.redirect_url) {\n        // 跳转到第三方OAuth页面\n        window.location.href = response.data.redirect_url;\n      } else {\n        console.error('Failed to get OAuth redirect URL:', response.message);\n        // 失败时清除localStorage\n        localStorage.removeItem('oauth_platform');\n      }\n    } catch (error) {\n      console.error('OAuth redirect error:', error);\n      // 失败时清除localStorage\n      localStorage.removeItem('oauth_platform');\n    }\n  };\n\n  // 如果没有OAuth插件数据，不渲染任何内容\n  if (!authPlugins || authPlugins.length === 0) {\n    return null;\n  }\n\n  return (\n    <>\n      {authPlugins.map((plugin, index) => (\n        <img\n          key={`oauth-${plugin.platform || index}`}\n          src={plugin.icon_url}\n          alt={plugin.platform || `OAuth Platform ${index + 1}`}\n          style={{\n            width: 24,\n            height: 24,\n            cursor: 'pointer',\n            borderRadius: '50%',\n            marginLeft: index > 0 ? 8 : 0,\n            objectFit: 'contain', // 确保图标比例不变形\n            backgroundColor: '#fff', // 添加白色背景，适配透明图标\n            border: '1px solid #f0f0f0', // 添加淡边框，增强视觉效果\n            padding: '2px', // 添加内边距，避免图标贴边\n            transition: 'all 0.3s ease', // 添加过渡动画\n          }}\n          onMouseEnter={(e) => {\n            e.currentTarget.style.transform = 'scale(1.1)';\n            e.currentTarget.style.borderColor = '#1890ff';\n          }}\n          onMouseLeave={(e) => {\n            e.currentTarget.style.transform = 'scale(1)';\n            e.currentTarget.style.borderColor = '#f0f0f0';\n          }}\n          onClick={() => handleOAuthLogin(plugin.platform)}\n          title={`使用 ${plugin.platform} 登录`}\n        />\n      ))}\n    </>\n  );\n};\n\nconst Lang = () => {\n  const { styles } = useStyles();\n\n  return (\n    <div className={styles.lang} data-lang>\n      {SelectLang && <SelectLang />}\n    </div>\n  );\n};\n\nconst LoginMessage: React.FC<{\n  content: string;\n}> = ({ content }) => {\n  return (\n    <Alert\n      style={{\n        marginBottom: 24,\n      }}\n      message={content}\n      type=\"error\"\n      showIcon\n    />\n  );\n};\n\nconst Login: React.FC = () => {\n  const [userLoginState, setUserLoginState] = useState<API.LoginResult>({});\n  const [type, setType] = useState<string>('account');\n  const [authPlugins, setAuthPlugins] = useState<\n    API.AdminSettings['authPlugins']\n  >([]);\n  const [defaultLoginType, setDefaultLoginType] = useState<boolean>(false);\n  const { initialState: _initialState, setInitialState } =\n    useModel('@@initialState');\n  const { styles } = useStyles();\n  const { message } = App.useApp();\n  const intl = useIntl();\n\n  // 初始化获取OAuth认证插件信息\n  useEffect(() => {\n    const initAuthPlugins = async () => {\n      try {\n        // 先从localStorage获取\n        const savedAuthPlugins = localStorage.getItem('authPlugins');\n        if (savedAuthPlugins) {\n          setAuthPlugins(JSON.parse(savedAuthPlugins));\n        }\n\n        // 然后从API获取最新的\n        const response = await getAdminSettings({\n          skipErrorHandler: true,\n        });\n        if (response.code === 0 && response.data?.authPlugins) {\n          localStorage.setItem(\n            'authPlugins',\n            JSON.stringify(response.data.authPlugins),\n          );\n          setAuthPlugins(response.data.authPlugins);\n          setDefaultLoginType(response.data.defaultLoginType);\n        }\n      } catch (error) {\n        console.warn('Failed to fetch auth plugins:', error);\n      }\n    };\n\n    initAuthPlugins();\n  }, []);\n\n  const updateUserInfoAndSettings = async (\n    loginData: API.LoginResult['data'],\n    platform?: string,\n  ) => {\n    if (loginData) {\n      // 转换登录返回的数据为 CurrentUser 格式\n      const userInfo: API.CurrentUser = {\n        name:\n          loginData.extra?.nickname ||\n          loginData.extra?.username ||\n          loginData.account,\n        avatar: loginData.extra?.avatar,\n        userid: loginData.account,\n        email: loginData.email,\n        account: loginData.account,\n        roles: loginData.roles,\n        groups: loginData.groups,\n        extra: { ...loginData.extra, platform: platform || 'default' },\n        // 设置访问权限\n        access: loginData.roles?.[0]?.name || 'user',\n      };\n\n      // 获取用户设置\n      let settings = Settings;\n      try {\n        const response = await getAdminSettings({\n          skipErrorHandler: true,\n        });\n        if (response.code === 0) {\n          // 合并API设置和默认设置，保留前端特有字段\n          settings = {\n            ...response.data,\n            fixSiderbar: response.data.fixSiderbar ?? Settings.fixSiderbar,\n            pwa: response.data.pwa ?? Settings.pwa,\n            iconfontUrl: response.data.iconfontUrl ?? Settings.iconfontUrl,\n          } as any;\n\n          // 保存OAuth认证插件信息到本地存储\n          if (response.data?.authPlugins) {\n            localStorage.setItem(\n              'authPlugins',\n              JSON.stringify(response.data.authPlugins),\n            );\n          }\n        }\n      } catch (_error) {\n        console.warn(\n          'Failed to fetch settings after login, using default settings',\n        );\n      }\n\n      // 获取动态路由和菜单数据（只有登录用户才能获取）\n      let routeList: API.AdminRoute[] = [];\n      let menuData: any[] = [];\n      try {\n        const routeAndMenuData = await getRouteAndMenuData();\n        routeList = routeAndMenuData.routeList;\n        menuData = routeAndMenuData.menuData;\n        console.log('登录成功，已获取动态路由:', routeList);\n      } catch (error) {\n        console.warn('获取动态路由失败，使用空路由:', error);\n      }\n\n      // 保存用户信息到本地存储\n      localStorage.setItem('userInfo', JSON.stringify(userInfo));\n      localStorage.setItem('userSettings', JSON.stringify(settings));\n\n      flushSync(() => {\n        setInitialState((s) => ({\n          ...s,\n          currentUser: userInfo,\n          settings: settings as any,\n          menuData,\n          routeList,\n        }));\n      });\n    }\n  };\n\n  const handleSubmit = async (values: API.LoginParams) => {\n    try {\n      // 登录\n      const msg = await login({ ...values, type });\n      // 检查新的API响应格式\n      if (msg.code === 0 || msg.status === 'ok') {\n        const defaultLoginSuccessMessage = intl.formatMessage({\n          id: 'pages.login.success',\n          defaultMessage: '登录成功！',\n        });\n        message.success(defaultLoginSuccessMessage);\n\n        // 直接使用登录返回的用户信息，不再调用 fetchUserInfo\n        await updateUserInfoAndSettings(msg.data, values.platform || 'default');\n\n        const urlParams = new URL(window.location.href).searchParams;\n        window.location.href = urlParams.get('redirect') || '/admin/';\n        return;\n      }\n      console.log(msg);\n      // 如果失败去设置用户错误信息\n      setUserLoginState({\n        status: 'error',\n        type: type,\n        message: msg.message || '登录失败',\n      });\n    } catch (error) {\n      const defaultLoginFailureMessage = intl.formatMessage({\n        id: 'pages.login.failure',\n        defaultMessage: '登录失败，请重试！',\n      });\n      console.log(error);\n      message.error(defaultLoginFailureMessage);\n    }\n  };\n  const { status, type: loginType } = userLoginState;\n\n  return (\n    <div className={styles.container}>\n      <Helmet>\n        <title>\n          {intl.formatMessage({\n            id: 'menu.login',\n            defaultMessage: '登录页',\n          })}\n          {Settings.title && ` - ${Settings.title}`}\n        </title>\n      </Helmet>\n      <Lang />\n      <div\n        style={{\n          flex: '1',\n          padding: '32px 0',\n        }}\n      >\n        <LoginForm\n          contentStyle={{\n            minWidth: 280,\n            maxWidth: '75vw',\n          }}\n          logo={\n            <img\n              alt=\"logo\"\n              src=\"https://unfazed-eco.github.io/images/uz-logo.png\"\n            />\n          }\n          title=\"Unfazed Admin\"\n          subTitle={intl.formatMessage({\n            id: 'pages.layouts.userLayout.title',\n          })}\n          initialValues={{\n            autoLogin: true,\n          }}\n          actions={\n            authPlugins && authPlugins.length > 0\n              ? [\n                  <div\n                    key=\"oauth-actions\"\n                    style={{\n                      display: 'flex',\n                      alignItems: 'center', // 垂直居中\n                      gap: 4, // 控制文字和图标之间的间距\n                    }}\n                  >\n                    {/* biome-ignore lint/correctness/useUniqueElementIds: react-intl id 不是 DOM id */}\n                    <FormattedMessage\n                      key=\"loginWith\"\n                      id=\"pages.login.loginWith\"\n                      defaultMessage=\"其他登录方式\"\n                    />\n                    <ActionIcons key=\"icons\" authPlugins={authPlugins} />\n                  </div>,\n                ]\n              : []\n          }\n          onFinish={async (values) => {\n            await handleSubmit(values as API.LoginParams);\n          }}\n          submitter={defaultLoginType ? undefined : false}\n        >\n          <Tabs\n            activeKey={type}\n            onChange={setType}\n            centered\n            items={[\n              {\n                key: 'account',\n                label: intl.formatMessage({\n                  id: 'pages.login.accountLogin.tab',\n                  defaultMessage: '账户密码登录',\n                }),\n              },\n            ]}\n          />\n\n          {defaultLoginType &&\n            status === 'error' &&\n            loginType === 'account' && (\n              <LoginMessage\n                content={intl.formatMessage({\n                  id: 'pages.login.accountLogin.errorMessage',\n                  defaultMessage: '账户或密码错误(admin/ant.design)',\n                })}\n              />\n            )}\n          {defaultLoginType && type === 'account' && (\n            <>\n              <ProFormText\n                name=\"username\"\n                fieldProps={{\n                  size: 'large',\n                  prefix: <UserOutlined />,\n                }}\n                placeholder={intl.formatMessage({\n                  id: 'pages.login.username.placeholder',\n                  defaultMessage: '用户名: admin or user',\n                })}\n                rules={[\n                  {\n                    required: true,\n                    message: (\n                      // biome-ignore lint/correctness/useUniqueElementIds: react-intl id 不是 DOM id\n                      <FormattedMessage\n                        id=\"pages.login.username.required\"\n                        defaultMessage=\"请输入用户名!\"\n                      />\n                    ),\n                  },\n                ]}\n              />\n              <ProFormText.Password\n                name=\"password\"\n                fieldProps={{\n                  size: 'large',\n                  prefix: <LockOutlined />,\n                }}\n                placeholder={intl.formatMessage({\n                  id: 'pages.login.password.placeholder',\n                  defaultMessage: '密码: admin',\n                })}\n                rules={[\n                  {\n                    required: true,\n                    message: (\n                      // biome-ignore lint/correctness/useUniqueElementIds: react-intl id 不是 DOM id\n                      <FormattedMessage\n                        id=\"pages.login.password.required\"\n                        defaultMessage=\"请输入密码！\"\n                      />\n                    ),\n                  },\n                ]}\n              />\n            </>\n          )}\n          {defaultLoginType && (\n            <div\n              style={{\n                marginBottom: 24,\n              }}\n            >\n              <ProFormCheckbox noStyle name=\"autoLogin\">\n                {/* biome-ignore lint/correctness/useUniqueElementIds: react-intl id 不是 DOM id */}\n                <FormattedMessage\n                  id=\"pages.login.rememberMe\"\n                  defaultMessage=\"自动登录\"\n                />\n              </ProFormCheckbox>\n              <a\n                style={{\n                  float: 'right',\n                }}\n              >\n                {/* biome-ignore lint/correctness/useUniqueElementIds: react-intl id 不是 DOM id */}\n                <FormattedMessage\n                  id=\"pages.login.forgotPassword\"\n                  defaultMessage=\"忘记密码\"\n                />\n              </a>\n            </div>\n          )}\n        </LoginForm>\n      </div>\n      <Footer />\n    </div>\n  );\n};\n\nexport default Login;\n"],"names":[],"mappings":"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"}